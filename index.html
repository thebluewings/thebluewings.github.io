<!DOCTYPE html>
<html>
    <head>
        <title>LINE Notify綁定測試</title>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    </head>
    <body>

        <center>
            <h1>歡啟來到SimplEat LINE Notify綁定測試網頁</h1>
            <form action="https://notify-bot.line.me/oauth/authorize">
                <input type="text" hidden id="response_type" value="code">
                <input type="text" hidden id="client_id" value="nQTAPEeeT6MPcZA15ghfV3">
                <input type="text" hidden id="redirect_uri" value="https://thebluewings.github.io/result.html">
                <input type="text" hidden id="scope" value="notify">
                <input type="text" hidden id="state" value="123123123">
                <input type="submit" style="width: 200px;height: 50px; align-self: center;" value="開始綁定"/>
            </form>
            
        </center>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <script src="./liff-init.js"></script>
    <button type="button" onclick="linetest()">TEST</button>
    <script>
        var testLabel;
        function linetest() {
            const profile = liff.getProfile().then((value) => {
                testLabel.innerText = value.userId;
            });
        }
        window.onload = function() {
            testLabel = document.createElement('label');
            const node = document.createElement('label');
            var text = "";
            text = text + "OS: " + liff.getOS() + "\n";
            text = text + "Language: " + liff.getLanguage() + "\n";
            text = text + "Version: " + liff.getVersion() + "\n";
            text = text + "LineVersion: " + liff.getLineVersion() + "\n";
            text = text + "Context: " + liff.getContext() + "\n";
            text = text + "isInClient: " + liff.isInClient() + "\n";
            text = text + "isLoggedIn: " + liff.isLoggedIn() + "\n";
            text = text + "accessToken: " + liff.getAccessToken() + "\n";
            text = text + "idToken: " + liff.getIDToken() + "\n";
            const profile = liff.getProfile().then((value) => {
                testLabel.innerText = value.userId;
            });
            // text = text + "userId: ";
            // try {
            //     text = text + profile.userId + "\n";
            // } catch (error) {
            //     text = text + "error" + "\n";
            // }

            // text = text + "profile['userId']: ";
            // try {
            //     text = text + profile['userId'] + "\n";
            // } catch (error) {
            //     text = text + "error" + "\n";
            // }
            // text = text + "getUserID(): ";
            // try {
            //     text = text + profile.getUserID() + "\n";
            // } catch (error) {
            //     text = text + "error" + "\n";
            // }
            // text = text + "getUserId(): ";
            // try {
            //     text = text + profile.getUserId() + "\n";
            // } catch (error) {
            //     text = text + "error" + "\n";
            // }
            
            console.log(text);
            node.innerText = text;
            document.body.appendChild(testLabel);
            document.body.appendChild(node);
        }
    </script>
    </body>
</html>